<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Desain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body class="bg-[#faf4f0]" x-data>
    <header
      class="flex justify-between items-center pt-4 mx-6 md:mx-14 md:mt-10 mb-20"
    >
      <h1 class="text-xl md:text-3xl font-bold text-neutral-700">Hanca</h1>
      <div
        class="relative md:static flex flex-col-reverse md:flex-row items-end md:items-center gap-x-8"
      >
        <form
          x-show="$store.hanca.modalPengguna"
          x-transition.origin.right.duration.500ms
          class="flex items-center absolute top-10 md:static"
          @submit.prevent="$store.hanca.simpanPengguna()"
        >
          <template x-if="$store.hanca.pengguna == ''">
            <input
              type="text"
              x-model="$store.hanca.namaPengguna"
              placeholder="isi nama kamu..."
              class="text-sm md:text-base w-60 text-neutral-700 py-2 px-3 md:w-80 mr-2 md:mr-6 rounded-3xl focus:outline-none focus:border-none"
            />
          </template>
          <template x-if="$store.hanca.pengguna != ''">
            <input
              type="text"
              x-model="$store.hanca.namaPengguna = $store.hanca.pengguna"
              placeholder="isi nama kamu..."
              class="text-sm md:text-base w-60 text-neutral-700 py-2 px-3 md:w-80 mr-2 md:mr-6 rounded-3xl focus:outline-none focus:border-none"
            />
          </template>
          <button
            class="py-2 px-5 md:px-8 bg-[#3aa1ca] rounded-3xl text-neutral-100 font-medium"
          >
            simpan
          </button>
        </form>
        <template x-if="$store.hanca.pengguna != ''">
          <span @click="$store.hanca.bukaFormPengguna()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              class="bi bi-person-check w-7 md:w-10 cursor-pointer"
              viewBox="0 0 16 16"
            >
              <path
                d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
              />
              <path
                d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
              />
            </svg>
          </span>
        </template>
        <template x-if="$store.hanca.pengguna == ''">
          <span @click="$store.hanca.bukaFormPengguna()"
            ><svg
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              class="bi bi-person-dash w-7 md:w-10 cursor-pointer"
              viewBox="0 0 16 16"
            >
              <path
                d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7M11 12h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1m0-7a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
              />
              <path
                d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
              /></svg
          ></span>
        </template>
      </div>
    </header>
    <main class="flex flex-col gap-y-12 lg:flex-row">
      <div id="tentang-hanca" class="px-6 md:px-14 lg:w-1/2 lg:px-14">
        <img
          src="./images/tertunda-resize.jpg"
          alt=""
          class="block md:w-full rounded-lg"
        />
        <h2 class="text-lg font-bold md:text-xl text-neutral-700 mt-6">
          Apa itu hanca?
        </h2>
        <p class="text-sm mt-8 md:text-base text-neutral-700">
          Hanca berasal dari kata bahasa Sunda yg artinya pekerjaan yg tertunda.
          Pekerjaan yang dimaksud seperti membaca buku, menonton film, dan
          lain-lain.
        </p>
        <button
          class="text-sm block px-4 py-2 md:px-8 mt-12 bg-[#3aa1ca] rounded-3xl text-neutral-100 font-medium md:text-base"
        >
          Read More
        </button>
      </div>
      <div
        id="item-hanca"
        class="mx-4 md:mx-14 px-2 lg:w-1/2 py-4 bg-[#ffffff] rounded-lg relative"
      >
        <button
          @click="$store.hanca.bukaFormTambah()"
          class="text-sm block md:ml-6 py-2 px-4 md:px-10 bg-[#3aa1ca] rounded-3xl text-neutral-100 font-medium md:text-base"
        >
          buat hanca
        </button>
        <div
          x-data
          x-show="$store.hanca.modalUbah"
          x-transition.origin.right.duration.700ms
          class="absolute top-0 left-0 right-0 bottom-0 rounded-lg flex flex-col justify-center bg-neutral-600 opacity-95 z-50"
        >
          <h2
            class="text-base md:text-xl font-bold text-center text-neutral-100"
          >
            Buat Hanca Anda
          </h2>
          <form
            x-data
            x-on:submit.prevent="$store.hanca.simpanUbahHanca()"
            class="mx-3 mt-4 py-10 rounded-md"
          >
            <span
              @click="$store.hanca.bukaFormUbah()"
              class="absolute -top-2 rounded-full -right-1 outline-none cursor-pointer z-50"
              ><img
                src="./images/close.png"
                alt="logo tutup"
                class="w-8 grayscale"
            /></span>
            <div class="flex flex-col w-3/4 mx-auto">
              <label
                for="nama_barang"
                class="text-sm md:text-base text-neutral-100 font-semibold"
                >Nama Hanca</label
              >
              <input
                type="text"
                id="nama_barang"
                x-model="$store.hanca.namaHanca"
                placeholder="masukkan nama hanca..."
                class="text-sm md:text-base border-2 py-2 px-2 rounded-md mt-1 focus:outline-none text-neutral-700 focus:bg-gray-50 focus:text-medium"
              />
            </div>
            <div class="flex flex-col w-3/4 mx-auto mt-4">
              <label
                for="kategori"
                class="text-sm md:text-base text-neutral-100 font-semibold"
                >Kategori Hanca</label
              >
              <select
                id="kategori"
                x-model="$store.hanca.kategoriHanca"
                class="text-sm md:text-base -ml-1 mt-1 py-2 px-2 rounded-md text-neutral-700 focus:outline-none"
              >
                <option value="" disabled selected>
                  pilih kategori hanca...
                </option>
                <template x-for="kategori in $store.hanca.kategoris">
                  <option
                    :value="kategori.index"
                    x-text="kategori.namaKategori"
                  ></option>
                </template>
              </select>
            </div>
            <div class="flex flex-col w-3/4 mx-auto mt-4">
              <label
                for="hal/eps"
                class="text-sm md:text-base text-neutral-100 font-semibold"
                >Halaman/Episode</label
              >
              <input
                type="number"
                id="hal/eps"
                x-model="$store.hanca.jumlahHanca"
                placeholder="masukkan hal/eps saat ini.."
                class="text-sm md:text-base border-2 py-2 px-2 rounded-md mt-1 focus:outline-none text-neutral-700 focus:bg-gray-50 focus:text-medium"
              />
            </div>
            <div class="w-3/4 mx-auto mt-6 text-center">
              <button
                class="text-sm md:text-base text-center bg-neutral-500 py-2 w-full rounded-md font-semibold text-neutral-100 hover:bg-neutral-700 transition ease-in-out hover:-translate-y-1 duration-300"
              >
                ubah hanca
              </button>
            </div>
          </form>
        </div>
        <div
          x-data
          x-show="$store.hanca.modalTambah"
          x-transition.origin.right.duration.700ms
          class="absolute top-0 left-0 right-0 bottom-0 rounded-lg flex flex-col justify-center bg-neutral-600 opacity-95 z-50"
        >
          <h2
            class="text-base md:text-xl font-bold text-center text-neutral-100"
          >
            Buat Hanca Anda
          </h2>
          <form
            x-data
            x-on:submit.prevent="$store.hanca.tambahHanca()"
            class="mx-3 mt-4 py-10 rounded-md"
          >
            <span
              @click="$store.hanca.bukaFormTambah()"
              class="absolute -top-2 rounded-full -right-1 outline-none cursor-pointer z-50"
              ><img
                src="./images/close.png"
                alt="logo tutup"
                class="w-8 grayscale"
            /></span>
            <div class="flex flex-col w-3/4 mx-auto">
              <label
                for="nama_barang"
                class="text-sm md:text-base text-neutral-100 font-semibold"
                >Nama Hanca</label
              >
              <input
                type="text"
                id="nama_barang"
                x-model="$store.hanca.namaHanca"
                placeholder="masukkan nama hanca..."
                class="text-sm md:text-base border-2 py-2 px-2 rounded-md mt-1 focus:outline-none text-neutral-700 focus:bg-gray-50 focus:text-medium"
              />
            </div>
            <div class="flex flex-col w-3/4 mx-auto mt-4">
              <label
                for="kategori"
                class="text-sm md:text-base text-neutral-100 font-semibold"
                >Kategori Hanca</label
              >
              <select
                id="kategori"
                x-model="$store.hanca.kategoriHanca"
                class="text-sm md:text-base -ml-1 mt-1 py-2 px-2 rounded-md text-neutral-700 focus:outline-none"
              >
                <option value="" disabled selected>
                  pilih kategori hanca...
                </option>
                <template x-for="kategori in $store.hanca.kategoris">
                  <option
                    :value="kategori.index"
                    x-text="kategori.namaKategori"
                  ></option>
                </template>
              </select>
            </div>
            <div class="flex flex-col w-3/4 mx-auto mt-4">
              <label
                for="hal/eps"
                class="text-sm md:text-base text-neutral-100 font-semibold"
                >Halaman/Episode</label
              >
              <input
                type="number"
                id="hal/eps"
                x-model="$store.hanca.jumlahHanca"
                placeholder="masukkan hal/eps saat ini.."
                class="text-sm md:text-base border-2 py-2 px-2 rounded-md mt-1 focus:outline-none text-neutral-700 focus:bg-gray-50 focus:text-medium"
              />
            </div>
            <div class="w-3/4 mx-auto mt-6 text-center">
              <button
                class="text-sm md:text-base text-center bg-neutral-500 py-2 w-full rounded-md font-semibold text-neutral-100 hover:bg-neutral-700 transition ease-in-out hover:-translate-y-1 duration-300"
              >
                tambah hanca
              </button>
            </div>
          </form>
        </div>
        <template x-if="$store.hanca.hancas.length">
          <template x-for="item in $store.hanca.hancas">
            <div
              class="mt-14 mb-10 flex gap-x-2 justify-start md:px-14"
              :key="item.id"
            >
              <div class="w-1/4">
                <img :src="item.kategori.icon" alt="icon kategori" />
              </div>
              <div class="w-3/4">
                <h3
                  x-text="item.hanca"
                  class="text-base md:text-lg font-bold text-neutral-700"
                ></h3>
                <div class="flex text-neutral-700 gap-x-4">
                  <p class="font-medium text-xs md:text-base">
                    Hal. <span class="font-normal">30</span>
                  </p>
                  <p class="font-medium text-xs md:text-base">
                    Kategori
                    <span
                      x-text="item.kategori.namaKategori"
                      class="font-normal"
                    ></span>
                  </p>
                </div>
                <div class="flex justify-between text-neutral-700 mt-8">
                  <p class="text-xs md:text-sm"></p>
                  <div class="flex gap-x-4">
                    <button
                      @click="$store.hanca.ubahHanca(item.id)"
                      class="text-sm py-1 px-3 md:px-5 bg-[#fdc325] rounded-md text-neutral-100 font-medium"
                    >
                      edit
                    </button>
                    <button
                      @click="$store.hanca.hapusHanca(item.id)"
                      class="text-sm py-1 px-3 md:px-5 bg-red-500 rounded-md text-neutral-100 font-medium"
                    >
                      hapus
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </template>
        </template>
        <!-- <div
          class="flex flex-row-reverse items-center gap-x-3 mx-auto justify-center"
        >
            <span
              class="cursor-pointer flex flex-row-reverse items-center gap-x-2 py-2 px-4 text-neutral-100 rounded-3xl bg-[#3aa1ca]"
            >
              <span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  class="bi bi-caret-down w-4"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M3.204 5h9.592L8 10.481zm-.753.659 4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659"
                  />
                </svg>
              </span>
              <button class="font-medium">lihat detail</button>
            </span>
        </div> -->
      </div>
    </main>
    <script>
      document.addEventListener("alpine:init", () => {
        Alpine.store("hanca", {
          pengguna: Alpine.$persist(""),

          //modal
          modalPengguna: false,
          bukaFormPengguna() {
            if (this.pengguna) {
              this.namaPengguna = this.pengguna;
            } else if (!this.pengguna) {
              this.namaPengguna = "";
            }
            this.modalPengguna = !this.modalPengguna;
          },

          namaPengguna: "",
          simpanPengguna() {
            this.pengguna = this.namaPengguna;
            this.bukaFormPengguna();
          },

          //kumpulan data
          //persist hancas
          hancas: Alpine.$persist([]),

          //data fix
          kategoris: [
            {
              index: 0,
              namaKategori: "buku",
              icon: "https://i.ibb.co/thYh8wJ/book.png",
            },
            {
              index: 1,
              namaKategori: "film",
              icon: "https://i.ibb.co/1fpQ7XW/film.png",
            },
          ],

          noHanca: [
            {
              iconNoData: "https://i.ibb.co/4ZpHgH0/not-book.png",
            },
            {
              iconNoData: "https://i.ibb.co/Kxh1ycM/not-film.png",
            },
          ],

          //data toggle element
          modalUbah: false,
          modalTambah: false,

          //kumpulan fungsi
          //fungsi toggle modal
          bukaFormTambah() {
            this.modalTambah = !this.modalTambah;
            this.membersihkanForm();
          },

          bukaFormUbah() {
            this.modalUbah = !this.modalUbah;
          },

          //data model input form hanca
          namaHanca: "",
          kategoriHanca: "",
          jumlahHanca: "",

          //data ambil id hanca
          idHanca: "",

          //kumpulanfungsiformhanca
          //validasiformhanca
          validasiHanca() {
            if (!this.namaHanca) {
              alert("isi nama hanca terlebih dahulu");
              return false;
            }
            if (!this.kategoriHanca) {
              alert("pilih kategori hanca terlebih dahulu");
              return false;
            }
            if (!this.jumlahHanca) {
              alert("isi halaman/episode terlebih dahulu");
              return false;
            }
            return true;
          },

          //membersihkan isi input form
          membersihkanForm() {
            this.namaHanca = "";
            this.kategoriHanca = "";
            this.jumlahHanca = "";
          },

          //tambah hanca
          tambahHanca() {
            if (this.validasiHanca()) {
              this.hancas.push({
                id: Date.now(),
                hanca: this.namaHanca,
                kategori: this.kategoris[this.kategoriHanca],
                jumlah: this.jumlahHanca,
              });
              this.membersihkanForm();
              this.bukaFormTambah();
            }
          },

          //ambil data berdasarkan id dan toggle modal
          ubahHanca(id) {
            if (!this.namaHanca) {
              this.namaHanca = this.hancas.filter(
                (item) => item.id == id
              )[0].hanca;
              this.kategoriHanca = this.kategoris.filter(
                (item) =>
                  item.namaKategori ==
                  this.hancas.filter((item) => item.id == id)[0].kategori
                    .namaKategori
              )[0].index;
              this.jumlahHanca = this.hancas.filter(
                (item) => item.id == id
              )[0].jumlah;
              this.idHanca = id;
              this.bukaFormUbah();
            } else {
              this.membersihkanForm();
              this.idHanca = "";
            }
          },

          //simpan perubahan hanca
          simpanUbahHanca() {
            if (this.validasiHanca()) {
              let index = this.hancas.findIndex(
                (item) => item.id == this.idHanca
              );
              this.hancas.splice(index, 1, {
                id: this.idHanca,
                hanca: this.namaHanca,
                kategori: this.kategoris[this.kategoriHanca],
                jumlah: this.jumlahHanca,
              });
              this.membersihkanForm();
              this.bukaFormUbah();
            }
          },

          //fungsi tidak terkait form
          //hapusSemuaHanca
          hapusSemuaHanca() {
            if (!this.hancas.length) {
              alert("hanca masih kosong. Ayo buat hancamu!!!");
            } else {
              if (confirm("hapus hanca?")) {
                this.hancas = [];
              }
            }
          },

          //hapus hanca berdasarkan id
          hapusHanca(id) {
            if (confirm("ingin menghapus hanca tersebut?")) {
              this.hancas = this.hancas.filter((item) => item.id != id);
            }
          },

          modalLebihTigaHanca: false,

          memunculkanLebihTigaHannca() {
            this.modalLebihTigaHanca = !this.modalLebihTigaHanca;
          },
        });
      });
    </script>
  </body>
</html>
